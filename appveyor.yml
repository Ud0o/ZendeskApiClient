image: Visual Studio 2017
version: 4.0.0-alpha-{build}
configuration: Release
environment:
  ZendeskApi_Credentials_Url:
    secure: 6tdYAy152pOr6pBBKtm8zfv4JU9u7SKqL45RfHZw/nOAUhVC0JYx5Ty4sogmTHff
  ZendeskApi_Credentials_Username: 
    secure: Rv45rqbIpakaKGdasv5TTPOwL4Nir3MQBg/ileSCUvvn2Qal4Z3Bqj8AxRFSWEBa
  ZendeskApi_Credentials_Token: 
    secure: pxQ4C8smnXSCLGfwFvazTiU0PmgxvOuLNXlOcUV+kJ1bu/P/UtGSX/FgK4733Nyu
before_build:
  - dotnet restore
build:
  project: ZendeskApiClient.sln
  parallel: true
  verbosity: minimal
clone_depth: 1
test_script:
- dotnet test -c Release .\test\ZendeskApi.Client.Tests\ZendeskApi.Client.Tests.csproj
after_build:
- dotnet pack .\src\ZendeskApi.Client\ZendeskApi.Client.csproj -o ../../output --no-build
artifacts:
- path: 'output\*.nupkg'
deploy:
- provider: NuGet
  api_key:
    secure: ZkYI4stkqiH2+3Y5u4kv6/WEbVpiyoQSSXp5is3ODPxlYu1uMdnkK1dDgfTSH4VG
  artifact: /.*nupkg/
  on:
    APPVEYOR_REPO_TAG: true
for:
-
  branches:
    only:
      - master
  test_script:
    - dotnet test -c Release .\test\ZendeskApi.Client.IntegrationTests\ZendeskApi.Client.IntegrationTests.csproj
