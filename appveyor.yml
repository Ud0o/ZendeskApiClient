image: Visual Studio 2017
version: 4.0.0-alpha-{build}
configuration: Release
environment:
  ZendeskApi_Credentials_Url:
    secure: C2FCZYsQc4saCFZ4Uw6gkBqHoyXZPsKucJRXKGKBhYp9cBxCXxupzuo9jB0ftVah
  ZendeskApi_Credentials_Username: 
    secure: whZ6DOkeg5NgmNdWKmiQnd0XBziOlelSNKmmWpHmEoZWD3uB4wE9GB0DXso/kuNu
  ZendeskApi_Credentials_Token: 
    secure: NwZv5U0/BQkKwlkroGsHK0jJSMY5Xy/sWFjRGZU4NLhcBZmOBpqawNS2yCpQ/JYL
before_build:
  - dotnet restore
build:
  project: ZendeskApiClient.sln
  parallel: true
  verbosity: minimal
clone_depth: 1
test_script:
- dotnet test -c Release .\test\ZendeskApi.Client.Tests\ZendeskApi.Client.Tests.csproj
after_build:
- dotnet pack .\src\ZendeskApi.Client\ZendeskApi.Client.csproj -o ../../output --no-build
artifacts:
- path: 'output\*.nupkg'
deploy:
- provider: NuGet
  api_key:
    secure: ZkYI4stkqiH2+3Y5u4kv6/WEbVpiyoQSSXp5is3ODPxlYu1uMdnkK1dDgfTSH4VG
  artifact: /.*nupkg/
  on:
    APPVEYOR_REPO_TAG: true
for:
-
  branches:
    only:
      - master
  test_script:
    - dotnet test -c Release .\test\ZendeskApi.Client.IntegrationTests\ZendeskApi.Client.IntegrationTests.csproj
